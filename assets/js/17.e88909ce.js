(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{335:function(s,a,e){"use strict";e.r(a);var r=e(7),t=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("Redis 是完全开源的，遵守 BSD 协议，是一个高性能的 key-value 数据库。下面详细记录在Linux服务器下安装Redis的过程。")]),s._v(" "),a("h2",{attrs:{id:"_1-redis下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-redis下载"}},[s._v("#")]),s._v(" 1. Redis下载")]),s._v(" "),a("p",[s._v("Linux上下载Reids的方式有很多种，可以通过电脑下载好压缩包上传至Linux服务器，也可以直接通过"),a("code",[s._v("wget")]),s._v("命令直接在Liunx服务器上进行下载。本次安装的是redis官方最新版本，若需其它版本 可以进入 "),a("a",{attrs:{href:"https://redis.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Redis官网"),a("OutboundLink")],1),s._v("查看其他版本。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://download.redis.io/releases/redis-6.0.6.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-安装准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装准备"}},[s._v("#")]),s._v(" 2. 安装准备")]),s._v(" "),a("h3",{attrs:{id:"_2-1-解压并安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-解压并安装"}},[s._v("#")]),s._v(" 2.1 解压并安装")]),s._v(" "),a("p",[s._v("解压后到解压根目录下的"),a("code",[s._v("src")]),s._v("中执行安装命令。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" redis-6.0.6.tar.gz "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_3-运行服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行服务"}},[s._v("#")]),s._v(" 3. 运行服务")]),s._v(" "),a("p",[s._v("等着编译完成后，执行ls 命令，会看到src目录下多了些启动文件，进入src目录，执行启动命令启动服务。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("./redis-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_4-其他配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-其他配置"}},[s._v("#")]),s._v(" 4. 其他配置")]),s._v(" "),a("h3",{attrs:{id:"_4-1-后台启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-后台启动"}},[s._v("#")]),s._v(" 4.1 后台启动")]),s._v(" "),a("p",[s._v("通过上述步骤，已经可以实现Reids的正常运行，但是在我们关闭了命令窗口或者退出了服务器，服务就自动关闭。这样在实际情况下是不行的，必须保持后台运行，对此我们要进行如下操作，修改"),a("code",[s._v("redis.conf")]),s._v("文件。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" redis.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将"),a("code",[s._v("daemonize no")]),s._v("改为=>"),a("code",[s._v("daemonize yes")]),s._v("操作完之后，就重新执行启动命令启动服务即可。")]),s._v(" "),a("h3",{attrs:{id:"_4-3-配置redis-cli指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-配置redis-cli指令"}},[s._v("#")]),s._v(" 4.3 配置redis-cli指令")]),s._v(" "),a("p",[s._v("将redis-cli,redis-server拷贝到bin下，让redis-cli指令可以在任意目录下直接使用")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/local/redis/bin/redis-server /usr/local/bin/\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/local/redis/bin/redis-cli /usr/local/bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_4-2-设置redis密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-设置redis密码"}},[s._v("#")]),s._v(" 4.2 设置redis密码")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("redis-cli\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看密码")]),s._v("\nconfig get requirepass\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置密码")]),s._v("\nconfig "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" requirepass yourpassword\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_4-3-外网访问redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-外网访问redis"}},[s._v("#")]),s._v(" 4.3 外网访问redis")]),s._v(" "),a("p",[s._v("首先进行配置防火墙,开放6379端口")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("firewall-cmd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--zone")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--permanent")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("重启防火墙以使配置即时生效")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("systemctl restart firewalld\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看系统所有开放的端口")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("firewall-cmd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--zone")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --list-ports\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_4-4-可能会遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-可能会遇到的问题"}},[s._v("#")]),s._v(" 4.4 可能会遇到的问题")]),s._v(" "),a("p",[s._v("可能开放端口后依旧无法访问，原因是虽然防火墙开放了6379端口，但是外网还是无法访问的，因为redis监听的是127.0.0.1:6379，并不监听外网的请求。这时候需要这样做。")]),s._v(" "),a("ul",[a("li",[s._v("把文件夹目录里的redis.conf配置文件里的bind 127.0.0.1前面加#注释掉")]),s._v(" "),a("li",[s._v("redis-cli连接到redis后，通过 "),a("code",[s._v("config get daemonize")]),s._v("和"),a("code",[s._v("config get protected-mode")]),s._v(" 是不是都为no，如果不是，就用"),a("code",[s._v("config set 配置名 属性")]),s._v(" 改为no。")])]),s._v(" "),a("h2",{attrs:{id:"_5-常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-常用命令"}},[s._v("#")]),s._v(" 5. 常用命令")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动")]),s._v("\n./redis/src/redis-server redis.conf\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v(" pid值  或者 ./redis-cli "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#客户端连接")]),s._v("\n./redis-cli "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#检测6379端口是否在监听")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lntp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);